[package]
name = "midmanstudio"
version = "0.1.0"
edition = "2021"

# Binary target for CSR apps
[[bin]]
name = "midmanstudio"
path = "src/main.rs"

[dependencies]
leptos = { version = "0.8", features = ["csr", "nightly"] }
console_error_panic_hook = "0.1"
wasm-bindgen = "0.2"
web-sys = { version = "0.3", features = [
  "console",
  "Window",
  "Document",
  "Element",
  "HtmlElement",
  "EventTarget",
  "MouseEvent",
  "KeyboardEvent",
  "SubmitEvent",
  "ScrollIntoViewOptions",
  "ScrollBehavior",
  "ScrollToOptions",
  # ADDED: Features for service worker and better error handling
  "Navigator",
  "ServiceWorkerContainer",
  "ServiceWorkerRegistration",
  "Request",
  "Response",
  "Headers",
  "Blob",
  "Url",
] }

# ADDED: JS-sys for better JavaScript interop
js-sys = "0.3"

# Optimize for size and compatibility in release builds
[profile.release]
opt-level = "s"  # Optimize for size instead of "z" for better compatibility
lto = true
codegen-units = 1
panic = "abort"
# ADDED: Ensure debug info is stripped but keep minimal for error reporting
debug = false
strip = "debuginfo"

# ADDED: Optimize dev builds for faster development
[profile.dev]
opt-level = 0
debug = true
panic = "unwind"

# ADDED: Ensure WASM-specific optimizations
[profile.release.package."*"]
opt-level = "s"
debug = false
